
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Big Data Dashboard</title>

	<!-- Include d3 -->
	<script src="js/d3.min.js"></script>
    
	<!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/dashboard.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<script>
		function getAvgSaleSize() {
			return getRandomNumber(250 ,100);
		}

		function getActiveCustomerCount() {
			return  getRandomNumber(2000 ,1000);
		}

		function getUnitsProduced() {
			return getRandomNumber(82,10);
		}

		function getRandomNumber(base, multiplier) {
			return base + Math.round(Math.random()*multiplier);
		}

		function updateKPIs() {
			var kpiData=[["Average Sale Size",getAvgSaleSize()],["Active Website Users",getActiveCustomerCount()],["Units Produced",getUnitsProduced()]];
			var kpiDiv=d3.select(".kpis");
			var kpis=kpiDiv.selectAll("div")
					.data(kpiData);
			kpis.exit().remove();
			kpis.enter().append("div")
				.append("h4")
				.text(function(d) {return d[1];});
			kpis
				.style("background-color","steelblue")
				.style("font-size", "5em")
				.style("text-align", "center")
				.style("color", "white")
				.attr("class", function (d,i) { if (i == 0) { return "col-xs-3";} else { return "col-xs-3 col-md-offset-1";}})
				.attr("id", function (d,i) {return "kpi" + i})
				.text(function (d) {return d[1];});
			kpis.append("h4")
					.style("color", "white")
					.text(function (d) {return d[0];})
					.attr("class","lead")
					.attr("id",function (d,i) {return "kpi" + i + "-label"});
		}
		window.setInterval(function() {updateKPIs()},1000);
	</script>
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
          
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Dashboard</h1>
          <div class="row kpis"></div>
		<script>

			updateKPIs();
		</script>	
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</body>
</html>
